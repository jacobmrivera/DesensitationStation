<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>The Desensitization Station</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
  </head>
  <body>
    <script type="module" src="flash_detector_working.js"></script>

    <script type="module" src="shaders.js"></script>
    <!-- <script src="practiceScripts/sliders.js"></script> -->


    <script src="compressor.js"></script>
    <script src="buttons.js"></script>
    <!-- <script src="slider_test.js"></script> -->


    <div class='parent'>
      <h1> The Desensitization Station </h1>
      <div id="videos-div">
        <div class="video-panel">
          <div style="visibility: hidden;">
            <h2> Input Video </h2>
          </div>
          <video style="visibility: hidden;" id="inputVideo" src="pokemon.mp4"   controls >
        </div>

        <div class="video-panel">
          <div>
            <h2> Resulting Video </h2>
          </div>
          <div id="canvasDiv">
            <canvas id="outputCanvas"  width="1920" height="1080" ></canvas>
            <canvas id="outputCanvas2"  width="1920" height="1080" style="position:absolute"></canvas>

          </div>
        </div>
      </div>


      <div id="controls">
        <button id="play-button" class="control-buttons" onclick="play">Play</button>
        <button id="pause-button" class="control-buttons" onclick="pause">Pause</button>
      </div>

          <div id="video-settings">
            <div class="play-settings">
              <h3> Visual Filtering </h3>
              <div class="vis-filter">
                <label> Brightness </label>
                <div style="display: flex; flex: 1;">
                  <input type="range" id="brightnessSlider" min="0" max="200" value="100" >
                  <span id="brightnessValue" class="sliderVal">100%</span>
                </div>
              </div>
              <div class="vis-filter">
                <label> Saturation </label>
                <div style="display: flex; flex: 1;">
                  <input type="range" id="saturationSlider" min="0" max="100" value="100" >
                  <span id="saturationValue" class="sliderVal">100%</span>
                </div>
              </div>
              <div class="vis-filter" >
                <label> Redness </label>
                <div style="display: flex; flex: 1;">
                  <input type="range" id="rednessSlider" min="0" max="100" value="100" >
                  <span id="rednessValue" class="sliderVal">100%</span>
                </div>
              </div>
              <div class="vis-filter">
                <label> Greenness </label>
                <div style="display: flex; flex: 1;">
                  <input type="range" id="greennessSlider" min="0" max="100" value="100">
                  <span id="greennessValue" class="sliderVal">100%</span>
                </div>
              </div>
              <div class="vis-filter">
                <label> Blueness </label>
                <div style="display: flex; flex: 1;">
                  <input type="range" id="bluenessSlider" min="0" max="100" value="100" >
                  <span id="bluenessValue" class="sliderVal">100%</span>
                </div>
              </div>
            <!-- </div> -->
          
          

          <div id="color-buttons-div">
            <!-- Red deficient -->
            <button class="color-button" id="pro" onclick="setPro()">Protanopia</button>
            <!-- Green deficient -->
            <button class="color-button" id="deu" onclick="setDeu()">Deuteranopia</button>
            <!-- Blue deficient -->
            <button class="color-button" id="tri" onclick="setTri()">Tritanopia</button>
          </div>
        </div>

        <div class="play-settings">
          <h3> Audio Filtering </h3>
          <div>
            <label for="filterType">Select Filter Type:</label>
            <select id="filterType">
              <option value="none">No Filter</option>
              <option value="lowpass">Low-Pass Filter</option>
              <option value="highpass">High-Pass Filter</option>
            </select>
          </div>
          <div>
            <label for="threshold">Compression Threshold:</label>
            <input type="range" id="threshold" min="-100" max="0" step="1" value="-50">
          </div>
        </div>

        <div class="play-settings">
          <h3> Flashing Percentage </h3>
          <div>
            <div id="flashingPercentage" class="flashing-percentage">0%</div>
          </div>
        </div>
      </div>
    </div>


    <!-- <script>
      document.getElementById('videoPlayer').addEventListener('play', function() {
          initFlashDetection();
      });
    </script> -->

    <div id="flash_detected" style="visibility: hidden;">-1</div>

  </body>
</html>
